(function(g){var k=window.AmazonUIPageJS||window.P,p=k._namespace||k.attributeErrors,n=p?p("MarsContentGridAssets",""):k;n.guardFatal?n.guardFatal(g)(n,window):n.execute(function(){g(n,window)})})(function(g,k,p){function n(d,a,l){l||(l=a,a=d,d=[]);var f=k.AmazonUIPageJS||k.P||g;f.now(a).execute("Registrant",function(c){c||f.when.apply(f,d).register(a,l)})}g.when("ContentGridModuleRegistration").execute("content-grid-controller.js",function(g){g.safeRegister(["A","videojs","MarsContentGridAccessibilityProcessor"],
"MarsContentGridController",function(a,l,f){return a.createClass({init:function(c,e){this._model=c;this._view=e;this._model.setVideoInstance(this._initVideoPlayer());this._model.getHidePlayButton()&&this._hidePlayButton();this._model.isAutoplay()&&this._bindEvents();var b=this;this._model.getVideoInstance().on("ready",function(){f.getInstance().requestProcessVideoJsMarkup(b._view.getParentContainer())})},_bindEvents:function(){this._bindAutoplayPause();this._bindAutoplayFullscreen();this._bindOnClick();
this._bindAutoplayStart()},_initVideoPlayer:function(){var c=this._model.getVideoURL(),e=/\.[0-9a-z]+$/i;"string"!==typeof c||e.test(c)||(c+=".mp4");var e=this._model.getParentID(),b=this._model.getVideoID(),a=document.createElement("video");a.type="video/mp4";a.id=b;a.setAttribute("webkit-playsinline","webkit-playsinline");a.setAttribute("playsinline","playsinline");document.getElementById(e).appendChild(a);e=l(a);e.src(c);e.controls(!0);e.addClass("video-js");e.addClass("content-grid-video");e.addClass("vjs-big-play-button");
e.addClass("vjs-big-play-centered");e.addClass("mako-cg-poster");e.poster(this._model.getPosterURL());return e},_bindAutoplayPause:function(){var c=this;this._model.getVideoInstance().onpause=function(){c._view.isVideoInViewport()&&c._model.setCustomerClickedVideo(!0)}},_bindAutoplayStart:function(){var c=this._model.getVideoInstance(),e=a.$;c.muted(!0);this._playPauseVideoInViewport();a.on.scroll(e.proxy(this._playPauseVideoInViewport,this))},_bindAutoplayFullscreen:function(){var c=this;this._model.getVideoInstance().onfullscreenchange=
function(){c._model.setCustomerClickedVideo(!0)}},_playPauseVideoInViewport:function(){var c=this._model.getVideoInstance();this._model.getCustomerClickedVideo()||(this._view.isVideoInViewport()?c.paused()&&c.play():c.paused()||c.pause())},_bindOnClick:function(){var c=this;this._model.getVideoInstance().on("click",function(){c._model.setCustomerClickedVideo(!0)})},_hidePlayButton:function(){var c=this._model.getVideoInstance();c.addClass("hide-big-play-button");c.addClass("mako-cg-play-button")},
destroy:function(){this._view=this._model=null}})})});"use strict";g.when("ContentGridModuleRegistration").execute("content-grid-factory.js",function(d){d.safeRegister(["A","MarsContentGridModel","MarsContentGridView","ready"],"MarsContentGridFactory",function(a,l,f){var c=[];return{getVideo:function(e){g.when("MarsContentGridController").execute("content-grid-video-factory",function(b){b=new b(new l(e),new f(e));c.push(b)});g.declare("mako-videojs-registered")},destroyAll:function(){c.forEach(function(c){c.destroy()});
c=[]}}})});"use strict";g.when("ContentGridModuleRegistration").execute("content-grid-interstitial.js",function(d){d.safeRegister(["A","MakoCommonCartHelper","a-modal","marsRefTagUtils","ExtraDataHelper"],"MarsContentGridInterstitial",function(a,l,f,c,e){var b=a.$,h,d=a.createClass({create:function(b,c,e,a){this.interstitialName=b;this.clientName=c;this.isMobile=a;this.header=e;this.baseReftag="MarsContentGrid_"+b;this._bindEvents()},_bindEvents:function(){b('input#add-to-cart-button[name\x3d"submit.add-to-cart"]').bind("click",
b.proxy(this._handleAtcEvent,this,"form#addToCart",'input#add-to-cart-button[name\x3d"submit.add-to-cart"]'));b('input#installments-button[name\x3d"submit.installments"]').bind("click",b.proxy(this._handleAtcEvent,this,"form#addToCart",'input#installments-button[name\x3d"submit.installments"]'));b('input#buy-now-button[name\x3d"submit.buy-now"]').bind("click",b.proxy(this._handleAtcEvent,this,"form#addToCart",'input#buy-now-button[name\x3d"submit.buy-now"]'));b('input#buy-now-button[type\x3d"submit"]').bind("click",
b.proxy(this._handleAtcEvent,this,"form#buyNow",'input#buy-now-button[type\x3d"submit"]'))},_handleAtcEvent:function(c,e,a){try{var f=this;a.preventDefault();var m=b(c),d=b('#buybox select[name\x3d"quantity"]').val(),h,q,n;"form#buyNow"===c?(b("form#buyNowCheckout").length&&(m=b("form#buyNowCheckout")),h=m.find('input[type\x3d"hidden"][name\x3d"asin"]').val(),q=m.find('input[type\x3d"hidden"][name\x3d"offeringID"]').val(),n=m.find('input[type\x3d"hidden"][name\x3d"sessionID"]').val()):this.isMobile?
('input#installments-button[name\x3d"submit.installments"]'===e&&(m=b("form#mobile-installments")),n=m.find('input[type\x3d"hidden"][name\x3d"verificationSessionID"]').val(),h=m.find('input[type\x3d"hidden"][name\x3d"a"]').val(),q=m.find('input[type\x3d"hidden"][name\x3d"oid"]').val()):(h=m.find(e).val(),q=m.find('input[type\x3d"hidden"][name\x3d"offerListingID"]').val(),n=m.find('input[type\x3d"hidden"][name\x3d"session-id"]').val());var p=b(e).closest('.a-declarative[data-action\x3d"aw-mash"]');
if(p&&p.length){var r=p.data("awMash");n=r.inputs.verificationSessionID;h=r.inputs.a;q=r.inputs.oid;d=r.inputs.quantity}var t=l.createRequest(n,this.clientName),u=f._handleInstallmentandGifting(0,!1),u=f._handlePreRegistration(m,p,0,u);t.setAdditionalData(u);t.addAsinData(h,q,d).setReftag(this.baseReftag+"_ATC");t.sendRequest().done(function(b){f._showInterstitial()}).fail(function(b){g.log("An error has occurred with common cart handler with: "+b+" for asin: "+h+", offerListingId: "+q+", quantity: "+
d,"FATAL","MarsContentGridAssets");k.ue&&k.ue.count("MarsContentGrid_Interstitial_CartRequestError",1)})}catch(v){k.ue&&k.ue.count("MarsContentGrid_Interstitial_HandleATCError",1)}},_showInterstitial:function(){var e={dataStrategy:"preload",name:this.interstitialName,header:this.header},a="#"+this._getCamelCaseFromSnakeCase(this.interstitialName),l=this.baseReftag+"_InterstitialOpened";if(this.isMobile)g.when("a-secondary-view").execute(function(f){var h=f.get(this.interstitialName);h||(h=f.create(b(a),
e));h.show();c.send(l)});else{var h=f.get(this.interstitialName);h||(h=f.create(b(a),e));h.show();c.send(l)}},_getCamelCaseFromSnakeCase:function(b){return b.replace(/-([a-z])/g,function(b){return b[1].toUpperCase()})},_handlePreRegistration:function(b,c,a,l){try{var f;if(c.length){var h=c.data("action");if(h){var d=c.data(h);d&&d.inputs&&(f=e.getObjectExtraData(d.inputs))}}else b.length&&(f=e.getFormExtraData(b[0]));f&&e.setObjectExtraData(l,f,a)}catch(q){g.log("Pre Registration UATC custom param inclusion failed: "+
q)}return l},_handleInstallmentandGifting:function(c,e){var a={};e&&(e=b("#installments-programId"))&&e.val()&&(a["isInstallmentsSelected."+c]=1,a["installments-programId."+c]=e.val(),a["installmentsProgram."+c]=e.val());if(b("#gift-wrap").is(":checked"))for(e=0;e<=c;e++)a["isToBeGiftWrapped."+e]="true";return a}});return{getInstance:function(){h||(h=new d);return h}}})});"use strict";g.when("ContentGridModuleRegistration").execute("content-grid-model.js",function(d){d.safeRegister(["A"],"MarsContentGridModel",
function(a){return a.createClass({init:function(a){this._videoURL=a.URL;this._videoID=a.ID;this._autoplay="string"===typeof a.autoplay?"true"===a.autoplay:a.autoplay;this._hidePlayButton="string"===typeof a.hidePlayButton?"true"===a.hidePlayButton:a.hidePlayButton;this._customerClickedVideo=!1;this._posterURL=a.posterURL;this._parentID=a.parentID},getVideoInstance:function(){return this._videoInstance},getSWFURL:function(){return SWF_URL},getVideoURL:function(){return this._videoURL},getVideoID:function(){return this._videoID},
getHidePlayButton:function(){return this._hidePlayButton},getCustomerClickedVideo:function(){return this._customerClickedVideo},getPosterURL:function(){return this._posterURL},getParentID:function(){return this._parentID},isAutoplay:function(){return this._autoplay},setVideoInstance:function(a){this._videoInstance=a},setCustomerClickedVideo:function(a){this._customerClickedVideo=a}})})});"use strict";g.when("ContentGridModuleRegistration").execute("content-grid-view.js",function(d){d.safeRegister(["A"],
"MarsContentGridView",function(a,l){var f=a.$;return a.createClass({init:function(a){this._parentContainer=document.getElementById(a.parentID)},getParentContainer:function(){return this._parentContainer},isVideoInViewport:function(){try{var a=this.getParentContainer();if(a&&a.getBoundingClientRect){var e=f(k),b=this.getParentContainer().getBoundingClientRect();return 0<b.bottom&&0<b.right&&b.top<e.height()&&b.left<e.width()}}catch(h){}return!1}})})});g.when("ContentGridModuleRegistration").execute("content-grid-modal.js",
function(d){d.safeRegister(["A","marsRefTagUtils"],"MarsContentGridModal",function(a,l){var f,c=a.createClass({create:function(e,b,c,f,d,k,n){this.remoteContentURL=d;this.ajaxFailMsg=k;this.manualRefresh=n;d=a.$;d=d("#"+b.replace(/-([a-z])/g,function(b){return b[1].toUpperCase()}));var p=d.parent(),m={name:b};f?a.capabilities.isAmazonApp&&(m.hideHeader=!0,g.when("a-secondary-view").execute(function(b){p.attr("data-a-secondary-view",JSON.stringify(m))})):g.when("a-modal").execute(function(b){m.header=
c;m.width="750";p.attr("data-a-modal",JSON.stringify(m))});this.remoteContentURL&&(a.off("a:popover:beforeShow:"+b,this._fetchRemoteContent),a.on("a:popover:beforeShow:"+b,this._fetchRemoteContent));d.one("click",function(){l.send("mars_content_grid_"+b+"_"+e)})},_fetchRemoteContent:function(c){var b=f,d=c.popover;d.inlineContent&&b.manualRefresh||a.get(b.remoteContentURL,{withCredentials:!0,success:function(b,a,c){d.update({inlineContent:b,dataStrategy:"inline"})},error:function(a,c,e){g.log("Get remote content failed with status: "+
c+", error thrown: "+e+" remoteContentURL: "+b.remoteContentURL,"FATAL","MarsContentGridAssets");b.ajaxFailMsg&&d.update({inlineContent:b.ajaxFailMsg,dataStrategy:"inline"});k.ue&&k.ue.count("MarsContentGrid_Modal_GetRemoteContentError",1)}})}});return{getInstance:function(){f||(f=new c);return f}}})});"use strict";g.when("ContentGridModuleRegistration").execute("content-grid-accessibility-processor.js",function(d){d.safeRegister(["A"],"MarsContentGridAccessibilityProcessor",function(a,d){var f=a.$,
c,e=a.createClass({init:function(){this.hasPageLoaded="complete"===document.readyState||!1;this.doProcessMarkup=!1;this.videoJsContainers=[];this.hasPageLoaded||this._bindPageReadyEvents()},requestProcessMarkup:function(){this.hasPageLoaded?this._processLinksForAriaLabel():this.doProcessMarkup=!0},requestProcessVideoJsMarkup:function(b){!b||!b instanceof f||!b instanceof HTMLElement||(b instanceof HTMLElement&&(b=f(b)),this.hasPageLoaded?this._processVideoJsMarkup(b):this.videoJsContainers.push(b))},
_bindPageReadyEvents:function(){var b=this;g.when("ready").execute(function(){b.hasPageLoaded=!0;b.doProcessMarkup&&b._processLinksForAriaLabel();if(b.videoJsContainers.length){for(var a=0;a<b.videoJsContainers.length;a++)b._processVideoJsMarkup(b.videoJsContainers[a]);b.videoJsContainers=[]}})},_processLinksForAriaLabel:function(){f(".content-grid-row-wrapper").find("a[title]").each(function(b,a){b=f(a);b.attr("aria-label")||b.attr("aria-label",b.attr("title"))})},_processVideoJsMarkup:function(b){f(b).find("button.vjs-menu-button[title]").each(function(b,
a){a=f(a);b=a.attr("title");a.attr("aria-label")||a.attr("aria-label",b);a=a.parent().find(".vjs-menu-content");a.attr("aria-label")||a.attr("aria-label",b)})}});return{getInstance:function(){c||(c=new e);return c}}})});"use strict";g.when("ContentGridModuleRegistration").execute(function(d){d.safeRegister([],"ContentGridConstants",{ATTRIBUTION:"MarsContentGridAssets",FATAL_LOG_LEVEL:"FATAL"})});"use strict";g.when("ContentGridModuleRegistration").execute("marsRefTagUtils.js",function(d){d.safeRegister(["A"],
"marsRefTagUtils",function(a){var d=a.$;return{send:function(a,c){if(!a)throw Error("refTag is not defined");d.get((c||"/gp/product/ajax-handlers/reftag.html")+"/ref\x3d"+a)}}})});"use strict";g.execute("mako-vse-light-player.js",function(){function d(a,d,f){f===p&&(f=d,d=a,a=[]);g.now(d).execute("Registrant",function(c){c===p&&g.when.apply(g,a).register(d,f)})}d(["A","Mako.VSEHelper","VSEPlayerIntegrationWithMako"],"Mako.IVSELightPlayer",function(a,d,f){var c=["videoUrl"];return{render:function(e,
b){if("undefined"===typeof b)throw"Argument required: playerParentId";for(var g=0;g<c.length;g++){var k=c[g];if(!a.$.trim(e[k]))throw"Argument required: options."+k;}e={video:{videoURL:e.videoUrl,imageURL:e.imageUrl},locale:e.locale||d.getLocale(),marketplaceID:e.marketplaceID||d.getMarketplaceId(),page:e.pageType||d.getPageType(),placement:e.placement||"placement_"+b,requester:"Mako",clientPrefix:"mako"+b};f.render(e,b,d.getVideoComponentEndpointHost())}}});d(["A"],"VSEPlayerIntegrationWithMako",
function(a){return{render:function(d,f,c){a.ajax(c+"/vap/ew/subcomponent/vseplayer",{params:d,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",withCredential:!0,timeout:4E3,success:function(c){var b=a.$("#"+f);if(1===b.length)b.html(c);else throw["Did not find the appropriate number of video parent elements.","Expecting 1; found: "+b.length,"Possible reasons: - conflicting players with non-unique ids\n - id name is not formatted correctly\n - parent element was removed or is not available (possibly race condition)"].join("\n");
},error:function(a){throw"Error calling VSE player endpoint. "+("string"===typeof a)?a:"";}})}}});d(["A"],"Mako.VSEHelper",function(a){var d=k.opt||{};return{getMarketplaceId:function(){return d.obfuscatedMarketId||"ATVPDKIKX0DER"},getLocale:function(){return d.language||"en_US"},getPageType:function(){return d.pageType||"Unknown"},getVideoComponentEndpointHost:function(){var a=k.location.host,c="https://www.amazon.com";0<=a.indexOf(".amazon.")&&(c="https://"+a);return c}}})});n([],"ContentGridModuleRegistration",
function(){return{safeRegister:n}})});