(function(b){var c=window.AmazonUIPageJS||window.P,k=c._namespace||c.attributeErrors,a=k?k("DetailPagePBXAssets",""):c;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,c,k){b.when("A").register("hctp-pbx-utils",function(a){var h=a.$;return{registerRefMarker:function(a){h.get("/hctp/log/refMarker?ref_\x3d"+a)},logCountMetric:function(a){c.ue&&c.ue.count&&c.ue.count(a,1)},startLatencyTimer:function(a){"function"==typeof c.uet&&c.uet("bb",a,{wb:1})},stopLatencyTimer:function(a){"function"==
typeof c.uex&&c.uex("ld",a,{wb:1})}}});"use strict";b.when("A").register("hctp-pbx-constants",function(a){return{CSM_METRICS:{CTA_LATENCY:"hctp_pbx_gap_pb_to_bottom_sheet"},REF_TAG_PREFIXES:{CTA_BUTTON:"dp_pb_btn_",LEARN_MORE:"dp_pb_lm_",WHY_APAY:"dp_whyapb_lm_"},REF_TAGS:{NON_AUTH:"dp_pb_non_auth"}}});"use strict";"use strict";"use strict";b.when("A","a-modal").register("hctp-pbx-cta-apay-popup",function(a,c){var n=a.$,d=null,g,f,p;return{showPopup:function(a){if(a){a={name:g,inlineContent:a,header:p};
var b=n(f);d=c.create(b,a);d.show()}},initialize:function(a){g=a.popupDivId;p=a.modalHeaderText;f="#"+g}}});b.when("A","a-button","hctp-pbx-cta-apay-popup","hctp-pbx-utils","hctp-pbx-constants").register("hctp-pbx-cta-utils",function(a,b,n,d,g){function f(e){e=e.$event;e.preventDefault();var b=q(e.target),f=b.data(),h=f.signedInStatus;e=f.csrfToken;var r=f.asin,f='\x3cspan class\x3d"pbx-cta-interstitial-text"\x3e'+f.interstitialButtonText+"\x3c/span\x3e",m=b.text();d.registerRefMarker(g.REF_TAG_PREFIXES.CTA_BUTTON+
r);q(".pbx-cta-alert").hide();h?(p(".pbx-cta-button"),b.html('\x3cspan class\x3d"a-spinner a-spinner-small pbx-cta-spinner"\x3e\x3c/span\x3e'+f),h={asin:r},e={"anti-csrftoken-a2z":e},d.startLatencyTimer(g.CSM_METRICS.CTA_LATENCY),a.ajax("/pre-bookings/create-order",{method:"post",contentType:"application/json",headers:e,params:h,paramsFormat:"json",success:function(a,f,e){l();b.text(m);c.location.href=a.redirectPath},error:function(a,f,e){try{var d=JSON.parse(a.http.response);if(d.insufficientBalanceContent){l();
b.text(m);var g=d.insufficientBalanceContent;n.initialize({popupDivId:"pbx-cta-apay-popup-container",bottomSheetHeight:320,modalHeaderText:k});n.showPopup(g)}else d.redirectPath?(l(),b.text(m),c.location.href=d.redirectPath):(l(),b.text(m),q(".pbx-cta-alert").show())}catch(h){l(),b.text(m)}}})):(d.logCountMetric("hctpPBXNonAuthenticatedCustomer"),e="/ap/signin?openid.return_to\x3d"+encodeURIComponent(c.location.protocol+"//"+c.location.host+c.location.pathname+"?ref\x3d"+g.REF_TAGS.NON_AUTH),e+="\x26openid.identity\x3d"+
encodeURIComponent("http://specs.openid.net/auth/2.0/identifier_select"),e=e+"\x26openid.assoc_handle\x3damzn_hctp_pbx_in\x26openid.mode\x3dcheckid_setup"+("\x26openid.claimed_id\x3d"+encodeURIComponent("http://specs.openid.net/auth/2.0/identifier_select")),e+="\x26openid.ns\x3d"+encodeURIComponent("http://specs.openid.net/auth/2.0"),c.location.href=e+"\x26openid.pape.max_auth_age\x3d0")}function p(){var a=b(".pbx-cta-button");a.isEnabled()&&a.disable()}function l(){b(".pbx-cta-button").enable()}
var q=a.$,k=q("#hctp-pbx-popover-header").val();return{getCTAClickHandler:function(){return f}}});b.when("A","hctp-pbx-cta-utils","hctp-pbx-utils","hctp-pbx-constants").register("hctp-pbx-cta",function(a,b,c,d){function g(){var a=f("#hctp-pbx-cta-asin").val();c.registerRefMarker(d.REF_TAG_PREFIXES.WHY_APAY+a)}var f=a.$;b=b.getCTAClickHandler();a.declarative("pbxcta-button-click","click",b);a.on("a:sheet:afterShow:pbx-cta-apay-popup-container",function(a){c.stopLatencyTimer(d.CSM_METRICS.CTA_LATENCY)});
a.on("a:popover:afterShow:pbx-cta-apay-popup-container",function(a){c.stopLatencyTimer(d.CSM_METRICS.CTA_LATENCY)});a.on("a:sheet:afterShow:hctp-pbx-cta-sheet-why-apay",function(a){g()});a.on("a:popover:afterShow:hctp-pbx-cta-popover-why-apay",function(a){g()})});"use strict";b.when("A","hctp-pbx-utils","hctp-pbx-constants").register("hctp-pbx",function(a,b,c){function d(){var a=g("#hctp-pbx-asin").val();b.registerRefMarker(c.REF_TAG_PREFIXES.LEARN_MORE+a)}var g=a.$;a.on("a:sheet:afterShow:hctp-pbx-sheet-lm",
function(a){d()});a.on("a:popover:afterShow:hctp-pbx-popover-lm",function(a){d()})})});